import { useState, useEffect } from â€œreactâ€;

const COLORS = [â€#FF4D8Dâ€, â€œ#FFD93Dâ€, â€œ#4DFFEEâ€, â€œ#C04DFFâ€, â€œ#FF7A4Dâ€, â€œ#4DFF91â€];

const MILESTONES = {
0: â€œğŸ‘¶ èª•ç”Ÿï¼ã“ã®ä¸–ç•Œã«æ¥ãŸã‚ˆâ€,
1: â€œğŸš¶ ã‚ˆã¡ã‚ˆã¡æ­©ãã¯ã˜ã‚â€,
3: â€œğŸ’ å¹¼ç¨šåœ’ãƒ»ä¿è‚²åœ’â€,
6: â€œğŸ« å°å­¦æ ¡å…¥å­¦â€,
10: â€œğŸ”Ÿ äºŒæ¡ï¼å°å­¦æ ¡é«˜å­¦å¹´â€,
12: â€œğŸ“ ä¸­å­¦æ ¡å…¥å­¦â€,
13: â€œğŸŒŸ ãƒ†ã‚£ãƒ¼ãƒ³ã‚¨ã‚¤ã‚¸ãƒ£ãƒ¼çªå…¥ï¼â€,
15: â€œğŸ“š é«˜æ ¡å—é¨“â€,
18: â€œğŸ—³ï¸ é¸æŒ™æ¨©ãƒ»æˆå¹´â€,
20: â€œğŸŠ æˆäººå¼â€,
22: â€œğŸ’¼ å¤§å­¦å’æ¥­ãƒ»ç¤¾ä¼šäººãƒ‡ãƒ“ãƒ¥ãƒ¼â€,
25: â€œğŸš— ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼ãŒå€Ÿã‚Šã‚„ã™ããªã‚‹â€,
30: â€œğŸŒ¿ ã‚¢ãƒ©ã‚µãƒ¼ï¼â€,
40: â€œğŸ”¥ ã‚¢ãƒ©ãƒ•ã‚©ãƒ¼ï¼ã¾ã ã¾ã ç¾å½¹â€,
50: â€œğŸŒ¸ åŠä¸–ç´€ï¼â€,
60: â€œğŸ‹ é‚„æš¦ãŠã‚ã§ã¨ã†ï¼â€,
70: â€œğŸŒº å¤å¸Œâ€,
77: â€œğŸ€ å–œå¯¿â€,
80: â€œğŸ‘ å‚˜å¯¿â€,
88: â€œğŸŒ¾ ç±³å¯¿â€,
99: â€œâœ¨ ç™½å¯¿â€,
100: â€œğŸ† 100æ­³ï¼è¶…å¤§å°ï¼ï¼â€,
};

function calcAge(birth) {
const now = new Date();
let age = now.getFullYear() - birth.getFullYear();
const mDiff = now.getMonth() - birth.getMonth();
if (mDiff < 0 || (mDiff === 0 && now.getDate() < birth.getDate())) ageâ€“;
return age;
}

function calcMonths(birth) {
const now = new Date();
let m = (now.getFullYear() - birth.getFullYear()) * 12 + (now.getMonth() - birth.getMonth());
if (now.getDate() < birth.getDate()) mâ€“;
return m;
}

function calcDays(birth) {
return Math.floor((new Date() - birth) / 86400000);
}

function calcNextBirthday(birth) {
const now = new Date();
const next = new Date(now.getFullYear(), birth.getMonth(), birth.getDate());
if (next <= now) next.setFullYear(next.getFullYear() + 1);
return Math.floor((next - now) / 86400000);
}

function Confetti() {
const emojis = [â€œğŸ‰â€, â€œğŸŠâ€, â€œâœ¨â€, â€œğŸŒŸâ€, â€œğŸ’«â€, â€œğŸˆâ€];
const items = Array.from({ length: 18 }, (_, i) => ({
id: i,
emoji: emojis[i % emojis.length],
left: Math.random() * 100,
delay: i * 0.12,
duration: 2.5 + Math.random() * 1.5,
}));
return (
<div style={{ position: â€œfixedâ€, inset: 0, pointerEvents: â€œnoneâ€, zIndex: 999 }}>
{items.map((item) => (
<div
key={item.id}
style={{
position: â€œabsoluteâ€,
top: -40,
left: `${item.left}%`,
fontSize: â€œ1.8remâ€,
animation: `confettiFall ${item.duration}s ${item.delay}s linear forwards`,
}}
>
{item.emoji}
</div>
))}
</div>
);
}

export default function App() {
const [dateVal, setDateVal] = useState(â€â€);
const [result, setResult] = useState(null);
const [showConfetti, setShowConfetti] = useState(false);

const today = new Date();
const maxDate = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, "0")}-${String(today.getDate()).padStart(2, "0")}`;

useEffect(() => {
if (!dateVal) { setResult(null); return; }
const birth = new Date(dateVal);
if (isNaN(birth)) return;

```
const age = calcAge(birth);
const months = calcMonths(birth);
const days = calcDays(birth);
const nextBD = calcNextBirthday(birth);
const isBirthday = birth.getDate() === today.getDate() && birth.getMonth() === today.getMonth();

const timeline = [];
for (let a = 0; a <= age; a++) {
  const year = birth.getFullYear() + a;
  timeline.push({ age: a, year, milestone: MILESTONES[a] || null });
}
timeline.reverse();

setResult({ age, months, days, nextBD, isBirthday, birth, timeline });

if (isBirthday) {
  setShowConfetti(true);
  setTimeout(() => setShowConfetti(false), 5000);
}
```

}, [dateVal]);

const styles = {
body: {
background: â€œ#0D0D1Aâ€,
minHeight: â€œ100vhâ€,
fontFamily: â€œâ€˜BIZ UDPGothicâ€™, â€˜Noto Sans JPâ€™, sans-serifâ€,
color: â€œ#fffâ€,
padding: â€œ0 0 4remâ€,
},
bgGlow: {
position: â€œfixedâ€,
inset: 0,
background: `radial-gradient(circle at 20% 20%, rgba(255,77,141,0.15) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(192,77,255,0.15) 0%, transparent 50%)`,
pointerEvents: â€œnoneâ€,
zIndex: 0,
},
container: {
position: â€œrelativeâ€,
zIndex: 1,
maxWidth: 680,
margin: â€œ0 autoâ€,
padding: â€œ2rem 1.2remâ€,
},
h1: {
fontFamily: â€œâ€˜Dela Gothic Oneâ€™, sans-serifâ€,
fontSize: â€œclamp(2rem, 8vw, 3.5rem)â€,
textAlign: â€œcenterâ€,
background: â€œlinear-gradient(135deg, #FF4D8D, #FFD93D, #4DFFEE)â€,
WebkitBackgroundClip: â€œtextâ€,
WebkitTextFillColor: â€œtransparentâ€,
backgroundClip: â€œtextâ€,
marginBottom: â€œ0.3remâ€,
},
subtitle: {
textAlign: â€œcenterâ€,
color: â€œrgba(255,255,255,0.45)â€,
fontSize: â€œ0.9remâ€,
marginBottom: â€œ2remâ€,
letterSpacing: â€œ0.1emâ€,
},
inputCard: {
background: â€œrgba(255,255,255,0.05)â€,
border: â€œ2px solid rgba(255,255,255,0.12)â€,
borderRadius: 20,
padding: â€œ1.5remâ€,
marginBottom: â€œ1.5remâ€,
},
label: {
display: â€œblockâ€,
color: â€œ#FFD93Dâ€,
fontSize: â€œ0.8remâ€,
fontWeight: 700,
letterSpacing: â€œ0.15emâ€,
textTransform: â€œuppercaseâ€,
marginBottom: â€œ0.6remâ€,
},
input: {
width: â€œ100%â€,
background: â€œrgba(255,255,255,0.08)â€,
border: â€œ2px solid rgba(255,255,255,0.15)â€,
borderRadius: 12,
padding: â€œ0.9rem 1remâ€,
color: â€œ#fffâ€,
fontSize: â€œ1.1remâ€,
fontFamily: â€œinheritâ€,
outline: â€œnoneâ€,
boxSizing: â€œborder-boxâ€,
},
resultCard: {
background: â€œrgba(255,255,255,0.05)â€,
border: â€œ2px solid #FF4D8Dâ€,
borderRadius: 20,
padding: â€œ1.8remâ€,
marginBottom: â€œ1.5remâ€,
textAlign: â€œcenterâ€,
boxShadow: â€œ0 0 40px rgba(255,77,141,0.2)â€,
},
ageLabel: {
fontFamily: â€œâ€˜Dela Gothic Oneâ€™, sans-serifâ€,
fontSize: â€œ1.4remâ€,
color: â€œrgba(255,255,255,0.8)â€,
},
ageNum: {
fontFamily: â€œâ€˜Dela Gothic Oneâ€™, sans-serifâ€,
fontSize: â€œclamp(4rem, 18vw, 7rem)â€,
lineHeight: 1,
background: â€œlinear-gradient(135deg, #FFD93D, #FF7A4D, #FF4D8D)â€,
WebkitBackgroundClip: â€œtextâ€,
WebkitTextFillColor: â€œtransparentâ€,
backgroundClip: â€œtextâ€,
},
ageDetail: {
color: â€œrgba(255,255,255,0.45)â€,
fontSize: â€œ0.85remâ€,
marginTop: â€œ0.3remâ€,
},
statsRow: {
display: â€œgridâ€,
gridTemplateColumns: â€œrepeat(3, 1fr)â€,
gap: â€œ0.8remâ€,
marginTop: â€œ1.2remâ€,
},
statBox: {
background: â€œrgba(255,255,255,0.05)â€,
borderRadius: 12,
padding: â€œ0.8rem 0.4remâ€,
border: â€œ1px solid rgba(255,255,255,0.1)â€,
},
statNum: {
fontFamily: â€œâ€˜Dela Gothic Oneâ€™, sans-serifâ€,
fontSize: â€œ1.2remâ€,
color: â€œ#4DFFEEâ€,
},
statLabel: {
fontSize: â€œ0.65remâ€,
color: â€œrgba(255,255,255,0.35)â€,
marginTop: â€œ0.2remâ€,
},
timelineTitle: {
fontFamily: â€œâ€˜Dela Gothic Oneâ€™, sans-serifâ€,
fontSize: â€œ1.3remâ€,
color: â€œ#4DFFEEâ€,
marginBottom: â€œ1.2remâ€,
},
timelineWrap: {
position: â€œrelativeâ€,
paddingLeft: â€œ2remâ€,
},
timelineLine: {
position: â€œabsoluteâ€,
left: 8,
top: 0,
bottom: 0,
width: 3,
background: â€œlinear-gradient(180deg, #FF4D8D, #C04DFF, #4DFFEE)â€,
borderRadius: 10,
},
};

return (
<>
<style>{`@import url('https://fonts.googleapis.com/css2?family=Dela+Gothic+One&family=BIZ+UDPGothic:wght@400;700&display=swap'); @keyframes confettiFall { from { opacity: 1; transform: translateY(0) rotate(0deg); } to { opacity: 0; transform: translateY(100vh) rotate(720deg); } } @keyframes popIn { from { opacity: 0; transform: scale(0.85) translateY(20px); } to { opacity: 1; transform: scale(1) translateY(0); } } @keyframes slideIn { from { opacity: 0; transform: translateX(-12px); } to { opacity: 1; transform: translateX(0); } } input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); cursor: pointer; } * { box-sizing: border-box; margin: 0; padding: 0; }`}</style>

```
  {showConfetti && <Confetti />}

  <div style={styles.body}>
    <div style={styles.bgGlow} />
    <div style={styles.container}>

      <h1 style={styles.h1}>ä»Šä½•æ­³ã ã£ã‘ï¼Ÿ</h1>
      <p style={styles.subtitle}>âœ¨ ç”Ÿå¹´æœˆæ—¥ã‚’å…¥ã‚Œã¦ã­ âœ¨</p>

      <div style={styles.inputCard}>
        <label style={styles.label}>ğŸ‚ ç”Ÿå¹´æœˆæ—¥</label>
        <input
          type="date"
          max={maxDate}
          value={dateVal}
          onChange={(e) => setDateVal(e.target.value)}
          style={styles.input}
        />
      </div>

      {result && (
        <>
          <div style={{ ...styles.resultCard, animation: "popIn 0.5s cubic-bezier(0.175,0.885,0.32,1.275)" }}>
            <div style={styles.ageLabel}>ã‚ãªãŸã¯ä»Š</div>
            <div style={styles.ageNum}>{result.age}</div>
            <div style={styles.ageLabel}>æ­³ï¼</div>
            <div style={styles.ageDetail}>
              {result.isBirthday
                ? "ğŸ‚ ä»Šæ—¥ãŒèª•ç”Ÿæ—¥ï¼ãŠã‚ã§ã¨ã†ï¼ğŸ‚"
                : `${result.birth.getFullYear()}å¹´${result.birth.getMonth() + 1}æœˆ${result.birth.getDate()}æ—¥ç”Ÿã¾ã‚Œ`}
            </div>

            <div style={styles.statsRow}>
              <div style={styles.statBox}>
                <div style={styles.statNum}>{result.months.toLocaleString()}</div>
                <div style={styles.statLabel}>ãƒ¶æœˆ</div>
              </div>
              <div style={styles.statBox}>
                <div style={styles.statNum}>{result.days.toLocaleString()}</div>
                <div style={styles.statLabel}>æ—¥</div>
              </div>
              <div style={styles.statBox}>
                <div style={styles.statNum}>{result.isBirthday ? "ğŸ‰" : result.nextBD}</div>
                <div style={styles.statLabel}>æ—¥å¾Œã«èª•ç”Ÿæ—¥ğŸ‰</div>
              </div>
            </div>
          </div>

          <div>
            <div style={styles.timelineTitle}>ğŸ“… ã‚ãªãŸã®å¹´è¡¨</div>
            <div style={styles.timelineWrap}>
              <div style={styles.timelineLine} />
              {result.timeline.map((item, i) => {
                const color = COLORS[i % COLORS.length];
                const isCurrent = item.age === result.age;
                return (
                  <div
                    key={item.age}
                    style={{
                      position: "relative",
                      marginBottom: "1rem",
                      animation: `slideIn 0.35s ${i * 0.035}s ease both`,
                      opacity: 0,
                      animationFillMode: "forwards",
                    }}
                  >
                    {/* dot */}
                    <div style={{
                      position: "absolute",
                      left: "-1.65rem",
                      top: "1rem",
                      width: 13,
                      height: 13,
                      borderRadius: "50%",
                      background: isCurrent ? "#FFD93D" : color,
                      border: "2px solid #0D0D1A",
                      boxShadow: `0 0 8px ${isCurrent ? "#FFD93D" : color}`,
                    }} />
                    <div style={{
                      background: isCurrent ? "rgba(255,217,61,0.08)" : "rgba(255,255,255,0.05)",
                      border: `2px solid ${isCurrent ? "#FFD93D" : color}`,
                      borderRadius: 13,
                      padding: "0.85rem 1.1rem",
                    }}>
                      <div style={{
                        fontFamily: "'Dela Gothic One', sans-serif",
                        fontSize: "1rem",
                        color: isCurrent ? "#FFD93D" : color,
                      }}>
                        {item.year}å¹´ {isCurrent && "ğŸ‘ˆ ä»Šã“ã“ï¼"}
                      </div>
                      <div style={{ fontSize: "0.72rem", color: "rgba(255,255,255,0.4)", fontWeight: 700, letterSpacing: "0.08em", marginTop: 2 }}>
                        {item.age}æ­³
                      </div>
                      {item.milestone && (
                        <div style={{ fontSize: "0.85rem", color: "rgba(255,255,255,0.7)", marginTop: "0.3rem" }}>
                          {item.milestone}
                        </div>
                      )}
                    </div>
                  </div>
                );
              })}
            </div>
          </div>
        </>
      )}
    </div>
  </div>
</>
```

);
}
